<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cricket Counter Siddhant</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#ffb020; --muted:#94a3b8; --glass:rgba(255,255,255,0.03);
      font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#071029 0%, #07162b 60%);color:#e6eef8;padding:18px}
    .wrap{width:980px;max-width:100%;display:grid;grid-template-columns:1fr 360px;gap:18px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:18px;box-shadow:0 8px 30px rgba(2,6,23,0.7);border:1px solid rgba(255,255,255,0.04)}
    h1{margin:0 0 10px;font-size:20px;color:var(--accent);display:flex;align-items:center;gap:10px}
    .teams{display:flex;gap:12px;margin-bottom:12px}
    .team{flex:1;background:var(--glass);padding:10px;border-radius:10px}
    .team input{width:100%;padding:8px;border-radius:8px;border:0;background:transparent;color:inherit;font-weight:600}
    .scoreRow{display:flex;gap:8px;margin-top:8px;align-items:center}
    .big{font-size:28px;font-weight:800}
    .small{font-size:13px;color:var(--muted)}

    /* right column */
    .right{display:flex;flex-direction:column;gap:12px}
    .box{background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}

    .controls{display:flex;flex-wrap:wrap;gap:8px;justify-content:center}
    button{background:linear-gradient(180deg,#1645a7,#0f338f);border:0;color:white;padding:10px 12px;border-radius:10px;font-weight:700;cursor:pointer}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.05);color:var(--accent)}
    button.warn{background:linear-gradient(180deg,#ff8c42,#ff6b00);}
    .mutedBtn{background:transparent;border:1px dashed rgba(255,255,255,0.04);color:var(--muted)}

    .ballsIcons{display:flex;gap:6px;align-items:center;justify-content:center}
    .ball{width:34px;height:34px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);font-weight:800;color:var(--muted);transition:all 220ms}
    .ball.active{background:var(--accent);color:#0b1220;transform:scale(1.08);box-shadow:0 6px 18px rgba(255,176,32,0.16)}

    .totalBalls{font-size:14px;text-align:center;color:var(--muted)}
    .history{max-height:260px;overflow:auto;padding:8px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid rgba(255,255,255,0.03)}
    .history div{padding:6px;border-bottom:1px dashed rgba(255,255,255,0.02);font-size:14px}

    footer{color:var(--muted);font-size:13px;text-align:center;margin-top:10px}

    @media(max-width:980px){.wrap{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Cricket Counter <span class="small">— Clean & Animated</span></h1>

      <div class="teams">
        <div class="team">
          <label class="small">Team A</label>
          <input id="teamAName" placeholder="Team A" />
          <div class="scoreRow">
            <div class="big" id="teamAScore">0/0</div>
            <div style="flex:1"></div>
            <div class="small">Overs <div id="teamAOvers" style="font-weight:700;display:inline-block;margin-left:6px">0.0</div></div>
          </div>
        </div>

        <div class="team">
          <label class="small">Team B</label>
          <input id="teamBName" placeholder="Team B" />
          <div class="scoreRow">
            <div class="big" id="teamBScore">0/0</div>
            <div style="flex:1"></div>
            <div class="small">Overs <div id="teamBOvers" style="font-weight:700;display:inline-block;margin-left:6px">0.0</div></div>
          </div>
        </div>
      </div>

      <div style="display:flex;gap:10px;align-items:center;margin-bottom:10px">
        <label class="small">Batting</label>
        <select id="battingSelect" style="padding:8px;border-radius:8px;border:0;background:rgba(255,255,255,0.02);color:inherit;font-weight:700">
          <option value="A">Team A</option>
          <option value="B">Team B</option>
        </select>
        <div style="flex:1"></div>
        <button id="swapTeams" class="ghost">Swap</button>
      </div>

      <div style="display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap">
        <div style="flex:1">
          <div class="box">
            <div style="display:flex;align-items:center;justify-content:space-between">
              <div>
                <div class="small">Current Balls in Over</div>
                <div id="currentBalls" style="font-size:22px;font-weight:800">0</div>
              </div>
              <div style="text-align:right">
                <div class="small">Total Balls</div>
                <div id="totalBalls" style="font-size:22px;font-weight:800">0</div>
              </div>
            </div>

            <div style="margin-top:12px" class="ballsIcons" id="ballsIcons">
              <!-- six ball icons will be inserted by JS -->
            </div>
          </div>

          <div style="margin-top:10px" class="controls">
            <button data-run="0">0</button>
            <button data-run="1">1</button>
            <button data-run="2">2</button>
            <button data-run="3">3</button>
            <button data-run="4">4</button>
            <button data-run="6">6</button>
            <button id="extra" class="mutedBtn">Extra</button>
            <button id="wicket" class="mutedBtn">Wicket</button>
          </div>

          <div style="display:flex;gap:8px;justify-content:center;margin-top:12px">
            <button id="undo" class="ghost">Undo</button>
            <button id="reset" class="warn">Reset</button>
            <button id="startNewInnings" class="ghost">New Innings</button>
          </div>
        </div>

        <div style="width:320px">
          <div class="box">
            <div class="small">Match History</div>
            <div class="history" id="history"></div>
          </div>

          <div class="box" style="margin-top:12px;text-align:center">
            <div class="small">Summary</div>
            <div id="summary" style="margin-top:8px"></div>
          </div>
        </div>
      </div>

      <footer>Tip: Keyboard 0-6 runs, e = extra, w = wicket, u = undo, r = reset</footer>
    </div>

    <div class="card right">
      <div class="box" style="text-align:center">
        <div class="small">Live Scoreboard</div>
        <div style="display:flex;gap:8px;align-items:center;justify-content:center;margin-top:8px">
          <div style="text-align:center">
            <div class="small">Team A</div>
            <div id="lbA" style="font-size:26px;font-weight:800">0/0</div>
          </div>
          <div style="width:1px;background:rgba(255,255,255,0.03);height:42px"></div>
          <div style="text-align:center">
            <div class="small">Team B</div>
            <div id="lbB" style="font-size:26px;font-weight:800">0/0</div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="small">Overs</div>
          <div style="display:flex;gap:8px;justify-content:center;margin-top:6px">
            <div id="lbAOvers" class="small">0.0</div>
            <div id="lbBOvers" class="small">0.0</div>
          </div>
        </div>
      </div>

      <div class="box" style="margin-top:12px;text-align:center">
        <div class="small">Controls Quick</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:8px">
          <button data-run="1">+1</button>
          <button data-run="4">+4</button>
          <button data-run="6">+6</button>
          <button id="wquick" class="mutedBtn">W</button>
          <button id="exquick" class="mutedBtn">E</button>
        </div>
      </div>

      <div class="box" style="margin-top:12px;text-align:center">
        <div class="small">Settings</div>
        <div style="margin-top:8px;display:flex;gap:8px;flex-direction:column">
          <label class="small">Set max overs (per innings)</label>
          <input id="maxOvers" placeholder="Leave blank for unlimited" />
        </div>
      </div>
    </div>
  </div>

<script>
  const stateKey = 'cricketAttractive_v1';
  let state = {
    teamA:{name:'Team A', runs:0, wickets:0, completedOvers:0, ballsInOver:0, totalBalls:0},
    teamB:{name:'Team B', runs:0, wickets:0, completedOvers:0, ballsInOver:0, totalBalls:0},
    batting:'A', history:[]
  };

  // DOM refs
  const teamAName = document.getElementById('teamAName');
  const teamBName = document.getElementById('teamBName');
  const teamAScore = document.getElementById('teamAScore');
  const teamAOvers = document.getElementById('teamAOvers');
  const teamAWkts = document.getElementById('teamAWkts');
  const teamBScore = document.getElementById('teamBScore');
  const teamBOvers = document.getElementById('teamBOvers');
  const teamBWkts = document.getElementById('teamBWkts');
  const battingSelect = document.getElementById('battingSelect');
  const currentBalls = document.getElementById('currentBalls');
  const totalBallsEl = document.getElementById('totalBalls');
  const historyEl = document.getElementById('history');
  const summaryEl = document.getElementById('summary');
  const lbA = document.getElementById('lbA');
  const lbB = document.getElementById('lbB');
  const lbAOvers = document.getElementById('lbAOvers');
  const lbBOvers = document.getElementById('lbBOvers');
  const ballsIcons = document.getElementById('ballsIcons');
  const maxOversInput = document.getElementById('maxOvers');

  // init six ball icons
  function initBallsUI(){
    ballsIcons.innerHTML='';
    for(let i=0;i<6;i++){
      const d = document.createElement('div'); d.className='ball'; d.textContent = i+1; ballsIcons.appendChild(d);
    }
  }

  function load(){
    try{const raw=localStorage.getItem(stateKey); if(raw) state=JSON.parse(raw);}catch(e){console.warn(e)}
    // ensure totalBalls exists
    state.teamA.totalBalls = state.teamA.totalBalls || 0;
    state.teamB.totalBalls = state.teamB.totalBalls || 0;
    initBallsUI(); renderAll();
  }
  function save(){ localStorage.setItem(stateKey, JSON.stringify(state)); }

  function renderTeam(t){
    const obj = state[t==='A'?'teamA':'teamB'];
    if(t==='A'){
      teamAScore.textContent = `${obj.runs}/${obj.wickets}`;
      teamAOvers.textContent = `${obj.completedOvers}.${obj.ballsInOver}`;
      lbA.textContent = `${obj.runs}/${obj.wickets}`;
      lbAOvers.textContent = `${obj.completedOvers}.${obj.ballsInOver}`;
    } else {
      teamBScore.textContent = `${obj.runs}/${obj.wickets}`;
      teamBOvers.textContent = `${obj.completedOvers}.${obj.ballsInOver}`;
      lbB.textContent = `${obj.runs}/${obj.wickets}`;
      lbBOvers.textContent = `${obj.completedOvers}.${obj.ballsInOver}`;
    }
  }

  function renderAll(){
    renderTeam('A'); renderTeam('B');
    battingSelect.value = state.batting;
    currentBalls.textContent = state[state.batting==='A'?'teamA':'teamB'].ballsInOver;
    totalBallsEl.textContent = state[state.batting==='A'?'teamA':'teamB'].totalBalls;
    renderHistory(); renderBallsIcons(); renderSummary();
  }

  function renderBallsIcons(){
    const arr = ballsIcons.querySelectorAll('.ball');
    const b = state[state.batting==='A'?'teamA':'teamB'].ballsInOver;
    arr.forEach((el,idx)=>{
      el.classList.toggle('active', idx < b);
    });
  }

  function pushHistory(entry){
    state.history.push({time:new Date().toLocaleTimeString(), ...entry});
    if(state.history.length>400) state.history.shift();
    save(); renderHistory();
  }

  function renderHistory(){
    historyEl.innerHTML='';
    for(let i=state.history.length-1;i>=0;i--){
      const it = state.history[i];
      const div = document.createElement('div');
      div.innerHTML = `<strong>${it.label}</strong> <span class="small">(${it.time})</span>`;
      historyEl.appendChild(div);
    }
  }

  function renderSummary(){
    summaryEl.innerHTML = `${state.teamA.name}: ${state.teamA.runs}/${state.teamA.wickets} in ${state.teamA.completedOvers}.${state.teamA.ballsInOver} overs<br/>${state.teamB.name}: ${state.teamB.runs}/${state.teamB.wickets} in ${state.teamB.completedOvers}.${state.teamB.ballsInOver} overs`;
  }

  function addRun(r, isExtra=false){
    const tKey = state.batting==='A'?'teamA':'teamB';
    const team = state[tKey];
    team.runs += r;
    let label = (isExtra? 'Extra':'Run') + ` +${r} to ${state.batting}`;
    if(!isExtra){
      team.ballsInOver +=1; team.totalBalls +=1;
      if(team.ballsInOver>=6){ team.completedOvers +=1; team.ballsInOver = 0; label += ' (over)'; }
    }
    pushHistory({type:isExtra?'extra':'run', runs:r, team:state.batting, label});
    save(); renderAll();
    animateBallPulse();
  }

  function addWicket(){
    const tKey = state.batting==='A'?'teamA':'teamB';
    const team = state[tKey];
    team.wickets +=1; team.ballsInOver +=1; team.totalBalls +=1;
    let label = `WICKET to ${state.batting}`;
    if(team.ballsInOver>=6){ team.completedOvers +=1; team.ballsInOver = 0; label += ' (over)'; }
    pushHistory({type:'wicket', team:state.batting, label});
    save(); renderAll(); animateBallPulse();
  }

  function animateBallPulse(){
    // tiny pulse animation on active ball
    const arr = ballsIcons.querySelectorAll('.ball');
    const idx = state[state.batting==='A'?'teamA':'teamB'].ballsInOver - 1;
    if(idx>=0 && arr[idx]){
      arr[idx].animate([{transform:'scale(1)'},{transform:'scale(1.18)'},{transform:'scale(1)'}],{duration:300});
    }
  }

  function undo(){
    const last = state.history.pop();
    if(!last) return; // nothing to undo
    const tKey = last.team==='A'?'teamA':'teamB';
    const team = state[tKey];
    if(last.type==='run'){
      team.runs -= last.runs;
      if(last.label.includes('(over)')){ team.completedOvers = Math.max(0, team.completedOvers-1); team.ballsInOver = 5; team.totalBalls = Math.max(0, team.totalBalls-1);
      } else { team.ballsInOver = Math.max(0, team.ballsInOver-1); team.totalBalls = Math.max(0, team.totalBalls-1); }
    } else if(last.type==='extra'){
      team.runs = Math.max(0, team.runs - last.runs);
    } else if(last.type==='wicket'){
      team.wickets = Math.max(0, team.wickets-1);
      if(last.label.includes('(over)')){ team.completedOvers = Math.max(0, team.completedOvers-1); team.ballsInOver = 5; team.totalBalls = Math.max(0, team.totalBalls-1);
      } else { team.ballsInOver = Math.max(0, team.ballsInOver-1); team.totalBalls = Math.max(0, team.totalBalls-1); }
    }
    save(); renderAll();
  }

  function resetAll(){ if(!confirm('Reset match?')) return; state = {teamA:{name:'Team A', runs:0, wickets:0, completedOvers:0, ballsInOver:0, totalBalls:0}, teamB:{name:'Team B', runs:0, wickets:0, completedOvers:0, ballsInOver:0, totalBalls:0}, batting:'A', history:[]}; save(); renderAll(); }

  function startNewInnings(){ if(!confirm('Start new innings?')) return; state.batting = state.batting==='A'?'B':'A'; pushHistory({type:'new_innings', label:`New innings — now ${state.batting} batting`}); save(); renderAll(); }

  // wire buttons
  document.querySelectorAll('button[data-run]').forEach(b=> b.addEventListener('click', ()=> addRun(Number(b.dataset.run), false)));
  document.getElementById('extra').addEventListener('click', ()=> addRun(1, true));
  document.getElementById('wicket').addEventListener('click', ()=> addWicket());
  document.getElementById('undo').addEventListener('click', ()=> undo());
  document.getElementById('reset').addEventListener('click', ()=> resetAll());
  document.getElementById('startNewInnings').addEventListener('click', ()=> startNewInnings());
  document.getElementById('swapTeams').addEventListener('click', ()=>{ const tmp = state.teamA; state.teamA = state.teamB; state.teamB = tmp; state.batting = state.batting==='A'?'B':'A'; pushHistory({type:'swap', label:'Teams swapped'}); save(); renderAll(); });

  // quick right-side controls
  document.querySelectorAll('.right [data-run]').forEach(b=> b.addEventListener('click', ()=> addRun(Number(b.dataset.run), false)));
  document.getElementById('wquick').addEventListener('click', ()=> addWicket());
  document.getElementById('exquick').addEventListener('click', ()=> addRun(1,true));

  battingSelect.addEventListener('change', ()=>{ state.batting = battingSelect.value; save(); renderAll(); });
  teamAName.addEventListener('input', ()=>{ state.teamA.name = teamAName.value || 'Team A'; save(); renderAll(); });
  teamBName.addEventListener('input', ()=>{ state.teamB.name = teamBName.value || 'Team B'; save(); renderAll(); });

  document.getElementById('toggleSummary')?.addEventListener('click', ()=>{
    if(summaryEl.style.display==='none' || summaryEl.style.display===''){
      summaryEl.style.display='block';
    } else { summaryEl.style.display='none'; }
  });

  // keyboard shortcuts
  window.addEventListener('keydown', (e)=>{
    if(document.activeElement.tagName==='INPUT' || document.activeElement.tagName==='TEXTAREA') return;
    if(e.key>='0' && e.key<='6'){ addRun(Number(e.key), false); }
    else if(e.key.toLowerCase()==='e'){ addRun(1,true); }
    else if(e.key.toLowerCase()==='w'){ addWicket(); }
    else if(e.key.toLowerCase()==='u'){ undo(); }
    else if(e.key.toLowerCase()==='r'){ resetAll(); }
  });

  load();
</script>
</body>
</html>
